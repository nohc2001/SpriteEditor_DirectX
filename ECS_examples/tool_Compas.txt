pEventSystem evtsys;
pPostRenderTarget prt;
pICBEditor selectedICBE;

int main(){
	EventData evt;
	
	//stateText data
	gcolor state_text_color = _gcolor(255, 255, 255, 255);
	rect4f stloc = _rect4f(-1000, 0, 0, 50);
	int state_text_layer = 0;
	char* state_text_stringptr = "blank state";

	//StateFlags
	bool AddFlag = false;
	pRenderData RenderText_AddState = 0;
	bool Add_VariableFlag = false;
	bool Add_FunctionFlag = false;
	bool Add_Variable_VertexFlag = false;
	bool Add_Variable_LineFlag = false;
	bool Add_Variable_CircleFlag = false;

	while(true){
		while(true){
			evt = PopEvent(evtsys);
			if(evt.message != 0){
				break;
			}
		}

		if(AddFlag == false){
			if(KeyDown(evt) && getEventKey(evt) == 'A'){
				AddFlag = true;
				state_text_stringptr = "Command : Add";
			}
		}
		else{
			if(Add_VariableFlag == false && Add_FunctionFlag == false){
				if(KeyDown(evt) && getEventKey(evt) == 'V'){
					Add_VariableFlag = true;
					state_text_stringptr = "Command : Add_Variable";
				}
				if(KeyDown(evt) && getEventKey(evt) == 'F'){
					Add_FunctionFlag = true;
					state_text_stringptr = "Command : Add_Function";
				}
			}
			else if(Add_VariableFlag){
				bool inb = true;
				inb = inb || Add_Variable_VertexFlag;
				inb = inb || Add_Variable_LineFlag;
				inb = inb || Add_Variable_CircleFlag;
				if(inb == false){
					if(KeyDown(evt) && getEventKey(evt) == 'V'){
						Add_Variable_VertexFlag = true;
						state_text_stringptr = "Command : Add_Variable_Vertex";
					}
					if(KeyDown(evt) && getEventKey(evt) == 'L'){
						Add_Variable_LineFlag = true;
						state_text_stringptr = "Command : Add_Variable_Line";
					}
					if(KeyDown(evt) && getEventKey(evt) == 'C'){
						Add_Variable_CircleFlag = true;
						state_text_stringptr = "Command : Add_Variable_Circle";
					}
				}
				else{
					if(Add_Variable_VertexFlag){
						if(KeyDown(evt)){
						}
					}
					else if(Add_Variable_LineFlag){
					}
					else if(Add_Variable_CircleFlag){
					}
				}
			}
			else if(Add_FunctionFlag){
			}
		}

		ChangeRenderData(&RenderText_AddState, _rdText(stloc.fp.x, stloc.fp.y, stloc.lp.x, stloc.lp.y, state_text_stringptr, state_text_color, 20)), state_text_layer);
		ReleaseRenderData(state_text_layer);

		//event loop
		if(KeyDown(evt)){
			if(getEventKey(evt) == 'A'){
				ChangeRenderData(&rd0, _rdText(-1000, 0, 0, 50, "Command : Add", _gcolor(255, 255, 255, 255), 20)), 0);
				ReleaseRenderData(0);
			}
		}
	}
}